{% extends "base.html" %}

{% block title %}Dashboard - COMSOC Attendance System{% endblock %}

{% block content %}
<style>
    body {
        font-family: 'Inter', sans-serif;
        background: #FFF4DD;
        color: #17100B;
        margin: 0;
        padding: 0;
        height: 100vh;
        overflow: hidden; /* no scroll */
        display: flex;
        flex-direction: column;
    }

    .dashboard {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        gap: 2rem; /* spacing between sections */
        height: 100%;
        padding: 1.5rem 2rem;
        box-sizing: border-box;
    }

    /* Section titles */
    .section-title {
        font-weight: 900;
        font-size: 1.6rem;
        color: #F37B21;
        font-style: italic;
        margin: 0 0 1rem 0;
    }

    /* Stats cards */
    .stats-container {
        display: flex;
        gap: 1.5rem;
    }
    .stats-card {
        flex: 1;
        background: linear-gradient(135deg, #fff, #F37B21);
        border-radius: 16px;
        padding: 1.2rem;
        color: #17100B;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    .stats-card h3 {
        font-size: 3.5rem;
        margin: 0;
        font-weight: 900;
        letter-spacing: -2px;
    }
    .stats-card p {
        margin: 0;
        font-size: 1rem;
        font-style: italic;
        font-weight: 600;
    }
    .stats-icon {
        font-size: 2.5rem;
        color: #17100B;
    }

    /* Recent events */
    .recent-events-box {
        background: #FFEFD6;
        border-radius: 16px;
        padding: 1rem 1.2rem;
    }
    .recent-events-box ul {
        margin: 0;
        padding-left: 1.2rem;
    }
    .recent-events-box p {
        margin: 0;
    }
    .recent-events-footer {
        display: flex;
        justify-content: flex-end;
        margin-top: 0.8rem;
    }
    .btn-orange {
        background: #F37B21;
        color: white;
        border: none;
        padding: 0.45rem 1rem;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
    }
    .btn-orange:hover {
        background: #d86615;
    }

    /* Shortcuts */
    .shortcuts {
        display: flex;
        gap: 1rem;
    }
    .shortcut-btn {
        flex: 1;
        text-align: center;
        padding: 0.8rem;
        border: 2px solid #F37B21;
        border-radius: 12px;
        background: #FFF4DD;
        font-weight: 600;
        color: #17100B;
        cursor: pointer;
        transition: 0.2s;
        text-decoration: none;
    }
    .shortcut-btn:hover {
        background: #F37B21;
        color: white;
    }
</style>

<div class="dashboard">

    <!-- Dashboard Section -->
    <div>
        <h2 class="section-title">Dashboard</h2>
        <div class="stats-container">
            <div class="stats-card">
                <div>
                    <p>Total Students</p>
                    <h3>{{ total_students }}</h3>
                </div>
                <div class="stats-icon"><i class="fas fa-user-friends"></i></div>
            </div>
            <div class="stats-card">
                <div>
                    <p>Total Events</p>
                    <h3>{{ total_events }}</h3>
                </div>
                <div class="stats-icon"><i class="far fa-calendar-alt"></i></div>
            </div>
        </div>
    </div>

    <!-- Recent Events Section -->
    <div>
        <h2 class="section-title">Recent Events</h2>
        <div class="recent-events-box">
            {% if recent_events %}
                <ul>
                    {% for event in recent_events %}
                    <li>
                        <strong>{{ event.event_name }}</strong> - {{ event.event_date.strftime('%B %d, %Y') }}
                        <a href="{{ url_for('events.records', event_id=event.event_id) }}" class="btn-orange btn-sm">View</a>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No events found.</p>
            {% endif %}
            <div class="recent-events-footer">
                <a href="{{ url_for('events.add') }}" class="btn-orange">+ Create Event</a>
            </div>
        </div>
    </div>

    <!-- Shortcuts Section -->
    <div>
        <h2 class="section-title">Shortcuts</h2>
        <div class="shortcuts">
            <a href="{{ url_for('students.add') }}" class="shortcut-btn">Add Student</a>
            <a href="{{ url_for('events.add') }}" class="shortcut-btn">Create Event</a>
            <a href="{{ url_for('scanner.index') }}" class="shortcut-btn">QR Scanner</a>
        </div>
    </div>
</div>
{% endblock %}
